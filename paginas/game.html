<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Raket Race met Obstakels</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            height: 100vh;
            margin: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            position: relative;
        }

        .background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('vangogh.jpg') no-repeat center center fixed;
            background-size: cover;
            z-index: -10;
        }

        nav {
            position: fixed;
            top: 10px;
            left: 10px;
            z-index: 1;
        }

        .clean-button {
            padding: 10px 20px;
            background-color: rgba(76, 175, 80, 0.8);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-size: 16px;
            border: none;
            cursor: pointer;
        }

        #gameCanvas {
            border: 1px solid white;
            background-color: rgba(255, 255, 255, 0.1);
            z-index: 1;
        }

        #rocketSelection, #rocketSelection2 {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            z-index: 1;
        }

        .rocket-option {
            width: 40px;
            height: 60px;
            cursor: pointer;
            border: 1px solid white;
            z-index: 1;
        }

        .rocket-option img {
            width: 100%;
            height: 100%;
        }

        #chooseRocketText, #chooseRocketText2 {
            font-size: 18px;
            font-weight: bold;
            text-align: center;
            margin: 10px 0;
            z-index: 1;
        }

        #restartButton {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            border: none;
            display: none;
            z-index: 1;
        }

        #winner {
            font-size: 24px;
            font-weight: bold;
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            z-index: 1;
        }
    </style>
</head>
<body>
    <div class="background"></div>

    <nav>
        <a href="../index.html" class="clean-button">Go to Home</a>
    </nav>

    <div id="chooseRocketText">Kies een raket voor Speler 1:</div>
    <div id="rocketSelection">
        <div class="rocket-option" onclick="selectRocket('rocket1.png', 'player1')">
            <img src="rocket1.png" alt="Rocket 1">
        </div>
        <div class="rocket-option" onclick="selectRocket('rocket2.png', 'player1')">
            <img src="rocket2.png" alt="Rocket 2">
        </div>
        <div class="rocket-option" onclick="selectRocket('rocket3.png', 'player1')">
            <img src="rocket3.png" alt="Rocket 3">
        </div>
        <div class="rocket-option" onclick="selectRocket('rocket4.png', 'player1')">
            <img src="rocket4.png" alt="Rocket 4">
        </div>
        <div class="rocket-option" onclick="selectRocket('rocket5.png', 'player1')">
            <img src="rocket5.png" alt="Rocket 5">
        </div>
    </div>

    <div id="chooseRocketText2" style="display: none;">Kies een raket voor Speler 2:</div>
    <div id="rocketSelection2" style="display: none;">
        <div class="rocket-option" onclick="selectRocket('rocket1.png', 'player2')">
            <img src="rocket1.png" alt="Rocket 1">
        </div>
        <div class="rocket-option" onclick="selectRocket('rocket2.png', 'player2')">
            <img src="rocket2.png" alt="Rocket 2">
        </div>
        <div class="rocket-option" onclick="selectRocket('rocket3.png', 'player2')">
            <img src="rocket3.png" alt="Rocket 3">
        </div>
        <div class="rocket-option" onclick="selectRocket('rocket4.png', 'player2')">
            <img src="rocket4.png" alt="Rocket 4">
        </div>
        <div class="rocket-option" onclick="selectRocket('rocket5.png', 'player2')">
            <img src="rocket5.png" alt="Rocket 5">
        </div>
    </div>

    <canvas id="gameCanvas" width="640" height="600"></canvas>
    <p id="winner"></p>

    <button id="restartButton" onclick="restartGame()">Start opnieuw</button>

    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");

        let player1Rocket = null;
        let player2Rocket = null;
        let obstacles = [];
        let gameOver = false;
        let player1Selected = false;
        let player2Selected = false;
        let keysPressed = {};

        // Functie om raketten te selecteren
        function selectRocket(rocketImage, player) {
            if (player === 'player1' && !player1Selected) {
                player1Rocket = { image: new Image(), src: rocketImage, x: 100, y: canvas.height - 60, speed: 5 };
                player1Rocket.image.src = rocketImage;
                player1Selected = true;
                document.getElementById('chooseRocketText').style.display = 'none';
                document.getElementById('rocketSelection').style.display = 'none';
                document.getElementById('chooseRocketText2').style.display = 'block';
                document.getElementById('rocketSelection2').style.display = 'flex';
            } else if (player === 'player2' && !player2Selected) {
                player2Rocket = { image: new Image(), src: rocketImage, x: 500, y: canvas.height - 60, speed: 5 };
                player2Rocket.image.src = rocketImage;
                player2Selected = true;
                if (player1Selected && player2Selected) {
                    startGame();
                }
            }
        }

        // Start het spel
        function startGame() {
            document.getElementById('chooseRocketText2').style.display = 'none';
            document.getElementById('rocketSelection2').style.display = 'none';
            document.getElementById('restartButton').style.display = 'none';
            // Genereer obstakels
            generateObstacles();
            gameLoop();
        }

        // Game loop
        function gameLoop() {
            if (!gameOver) {
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                // Teken raketten
                if (player1Rocket) {
                    ctx.drawImage(player1Rocket.image, player1Rocket.x, player1Rocket.y, 50, 80);
                }

                if (player2Rocket) {
                    ctx.drawImage(player2Rocket.image, player2Rocket.x, player2Rocket.y, 50, 80);
                }

                // Teken obstakels
                drawObstacles();

                handleMovement();
                checkCollision();
                checkWinner();

                requestAnimationFrame(gameLoop);
            }
        }

        // Beweging van de raketten
        function handleMovement() {
            if (keysPressed.ArrowUp && player2Rocket) player2Rocket.y -= player2Rocket.speed;
            if (keysPressed.ArrowDown && player2Rocket) player2Rocket.y += player2Rocket.speed;
            if (keysPressed.ArrowLeft && player2Rocket) player2Rocket.x -= player2Rocket.speed;
            if (keysPressed.ArrowRight && player2Rocket) player2Rocket.x += player2Rocket.speed;

            if (keysPressed.w && player1Rocket) player1Rocket.y -= player1Rocket.speed;
            if (keysPressed.s && player1Rocket) player1Rocket.y += player1Rocket.speed;
            if (keysPressed.a && player1Rocket) player1Rocket.x -= player1Rocket.speed;
            if (keysPressed.d && player1Rocket) player1Rocket.x += player1Rocket.speed;
        }

        // Controleer op botsingen met obstakels
        function checkCollision() {
            obstacles.forEach(obstacle => {
                if (player1Rocket && player1Rocket.x < obstacle.x + obstacle.width &&
                    player1Rocket.x + 50 > obstacle.x && player1Rocket.y < obstacle.y + obstacle.height &&
                    player1Rocket.y + 80 > obstacle.y) {
                    // Botsing met speler 1
                    gameOver = true;
                    document.getElementById("winner").innerText = "ðŸš€ Speler 1 verliest!";
                    document.getElementById("restartButton").style.display = "block";
                }

                if (player2Rocket && player2Rocket.x < obstacle.x + obstacle.width &&
                    player2Rocket.x + 50 > obstacle.x && player2Rocket.y < obstacle.y + obstacle.height &&
                    player2Rocket.y + 80 > obstacle.y) {
                    // Botsing met speler 2
                    gameOver = true;
                    document.getElementById("winner").innerText = "ðŸš€ Speler 2 verliest!";
                    document.getElementById("restartButton").style.display = "block";
                }
            });
        }

        // Teken obstakels
        function drawObstacles() {
            obstacles.forEach(obstacle => {
                ctx.fillStyle = "red";
                ctx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);
            });
        }

        // Genereer obstakels
        function generateObstacles() {
            obstacles = [
                { x: 200, y: 400, width: 50, height: 50 },
                { x: 400, y: 300, width: 50, height: 50 },
                { x: 300, y: 200, width: 50, height: 50 }
            ];
        }

        // Controleer wie gewonnen heeft
        function checkWinner() {
            if (player1Rocket.y <= 0) {
                document.getElementById("winner").innerText = "ðŸš€ Speler 1 wint!";
                gameOver = true;
                document.getElementById("restartButton").style.display = "block";
            } else if (player2Rocket.y <= 0) {
                document.getElementById("winner").innerText = "ðŸš€ Speler 2 wint!";
                gameOver = true;
                document.getElementById("restartButton").style.display = "block";
            }
        }

        // Functie om het spel opnieuw te starten
        function restartGame() {
            player1Selected = false;
            player2Selected = false;
            player1Rocket = null;
            player2Rocket = null;
            gameOver = false;
            keysPressed = {};
            document.getElementById("winner").innerText = "";
            document.getElementById("restartButton").style.display = "none";
            document.getElementById("rocketSelection").style.display = 'flex';
            document.getElementById("chooseRocketText").style.display = 'block';
        }

        // Keydown event voor raketbewegingen
        window.addEventListener('keydown', function(e) {
            keysPressed[e.key] = true;
        });

        // Keyup event voor raketbewegingen
        window.addEventListener('keyup', function(e) {
            delete keysPressed[e.key];
        });
    </script>
</body>
</html>
